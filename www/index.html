<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <meta http-equiv="Content-Security-Policy" content="default-src *; font-src data: *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src  'self' 'unsafe-inline' *">

    <title></title>


    <!-- compiled css output -->
    <link href="css/ionic.app.css" rel="stylesheet">

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="lib/ionic/js/timer.js"></script>
    <script src="lib/ionic/js/humanize-duration.js"></script>
    <script src="lib/ionic/js/moment.js"></script>

    <!-- cordova script (this will be a 404 during development)  -->

    <script src="lib/ngCordova/dist/ng-cordova.js"></script>

    <!-- path to ionic/angularjs js -->
    <script src="lib/ionic-timepicker/dist/ionic-timepicker.bundle.min.js"></script>

    <script src="lib/ion-datetime-picker/release/ion-datetime-picker.min.js"></script>
    <link href="lib/ion-datetime-picker/release/ion-datetime-picker.min.css" rel="stylesheet">
    <script src="lib/ionic-rating/ionic-rating.min.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/phonecontacts.js"></script>
    <script src="js/controllers.js"></script>

    <script src="js/controllers/TabCtrl.js"></script>
    <script src="js/controllers/T&CCtrl.js"></script>
    <script src="js/controllers/ServiceListCtrl.js"></script>
    <script src="js/controllers/GetFeedbackCtrl.js"></script>
    <script src="js/controllers/InvoiceCtrl.js"></script>
    <script src="js/controllers/MonthlyIncomeCtrl.js"></script>
    <script src="js/controllers/RegCtrl.js"></script>
    <script src="js/controllers/RegisterChallengeCtrl.js"></script>

    <script src="js/services.js"></script>
    <script type="text/javascript" >
        var myService;

        document.addEventListener('deviceready', function() {
            var serviceName = 'com.red_folder.phonegap.plugin.backgroundservice.sample.MyService';
            var factory = cordova.require('com.red_folder.phonegap.plugin.backgroundservice.BackgroundService');
            myService = factory.create(serviceName);

            //getStatus();
            go();
        }, true);

        function getStatus() {
            myService.getStatus(function(r){displayResult(r)}, function(e){displayError(e)});
        }

        function displayResult(data) {
            alert("Is service running: " + data.ServiceRunning);
        }

        function displayError(data) {
            alert("We have an error");
        }
        function updateHandler(data) {
            if (data.LatestResult != null) {
                try {
                    var resultMessage = document.getElementById("resultMessage");
                    resultMessage.innerHTML = data.LatestResult.Message;
                } catch (err) {
                }
            }
        }

        function go() {
            myService.getStatus(function(r){startService(r)}, function(e){displayError(e)});
        };
           function enableTimer(data) {
            if (data.TimerEnabled) {
                registerForUpdates(data);
            } else {
                myService.enableTimer(60000, function(r){registerForUpdates(r)}, function(e){displayError(e)});
            }
        }
        


  
    </script>


</head>
<body ng-app="starter">
<!--
  The nav bar that will be updated as we navigate between views.
-->
<ion-nav-bar class="bar-positive">
    <ion-nav-back-button nav-direction="back">
    </ion-nav-back-button>
</ion-nav-bar>
<!--
  The views will be rendered in the <ion-nav-view> directive below
  Templates are in the /templates folder (but you could also
  have templates inline in this html file if you'd like).
-->





<ion-nav-view></ion-nav-view>


<script src="cordova.js"></script>

</body>
</html>
